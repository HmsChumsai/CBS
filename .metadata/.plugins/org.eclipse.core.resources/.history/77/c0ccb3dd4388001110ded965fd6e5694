//DO NOT MODIFY  Fix DAYENDINP for DEP account|ZFIXDAYE|||||||1
	
	/* Created By Ravipong.Ch 2012/04/17
	*/
	

001()
	do SYSVAR^SCADRV0()
	type DbSet ds = Db.selectDbSet("DEP","TYPE=3003 AND ZSTATCD=0")
	while ds.next() do {
		if ds.getRecord().dftmdt'="K470" quit
		if ds.getRecord().ipf'="1MAE" quit
		new ZIPF,CID,OIPF
		type Date ZMLD,OINP,ZINP
		set CID=ds.getRecord().cid
		
		type RecordDEP dep = ds.getRecord("DEP")
		set OIPF=dep.ipf
		set OINP=dep.inp
		set ZMLD=dep.mld.toString("DD/MM/YEAR")
		set ZMLD=ZMLD.piece("/",1)
		set ZIPF="1MA"_ZMLD
		set ZINP=%SystemDate.nextFreqDate(ZIPF)
		
		set dep.ipf=ZIPF
		set dep.inp=ZINP
		set ^DAYEND(ZINP,"INP",CID,0)=""
		
		do dep.save()
		
		set ^ZFIXL(500,"MAIN","OK",CID)=CID_"|"_OIPF_"|"_ZIPF_"|"_OINP.toString("DD/MM/YEAR")_"|"_ZINP.toString("DD/MM/YEAR")
		
		
		}

	quit
	

002()
	do SYSVAR^SCADRV0()
	set ZTJD=%SystemDate.toString("DD/MM/YEAR")
	type DbSet ds = Db.selectDbSet("DEP","MLD=:ZTJD AND TYPE=3003")
	while ds.next() do {
		if ds.getRecord().ipf'="1MAE" quit
		type RecordDEP dep = ds.getRecord("DEP")
		type Date ZIPF
		set ZIPF="1MA"_ZTJD.piece("/",1)
		set ZINP=ZTJD.nextFreqDate(ZIPF)
		set dep.ipf=ZIPF
		set dep.inp=ZINP
		set ^DAYEND(ZINP,"INP",CID,0)=""
		
		do dep.save()
	}
	