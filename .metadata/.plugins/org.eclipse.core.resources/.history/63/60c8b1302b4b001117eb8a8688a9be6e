//DO NOT MODIFY  Batch for ZBCHDMJRPT|ZBCHDMJR||||||DMJ|||100|32000||0|||10|10|0||0||0
---------- REVHIST ------ Section marker

---------- OPEN    ------ Section marker

---------- SCHINIT ------ Section marker

---------- SCHEXEC ------ Section marker

---------- SCHPOST ------ Section marker

---------- SCHEXIT ------ Section marker

---------- THRINIT ------ Section marker

---------- THREXEC ------ Section marker

---------- EXEC    ------ Section marker
	
	
	
	if 'Db.isDefined("ZMONACC","ERPCD=:CID") quit
	type RecordDMJ zdmj=Db.getRecord("DMJ","TJD,DATETIME,CID,TSEQ")
	set ZTJD=zdmj.TJD
	set ZBCRD=zdmj.BRCD
	set ZCID=zdmj.CID
	set ZDESC=""
		
	
	type ResultSet rs = Db.select("DESC","ZMONACC","ERPCD=:ZCID")
	if 'rs.isEmpty(),rs.next() set ZDESC=rs.getCol(1)
	
	type RecordZDMJRPT zrpt = Db.getRecord("RecordZDMJRPT","TJD=:ZTJD,BRCD=:ZBRCD,CID=:ZCID",1)
	set zrpt.desc = ZDESC	
	
	if zdmj.ITC1=1 set zrpt.dr = zrpt.dr+zdmj.TAMT
	if zdmj.ITC1=0 set zrpt.cr = zrpt.cr+zdmj.TAMT
	
	do zrpt.bypassSave()
	
	quit
		
---------- THREXIT ------ Section marker

	
		
		