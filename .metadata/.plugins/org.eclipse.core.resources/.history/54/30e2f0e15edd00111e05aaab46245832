//DO NOT MODIFY  Batch For Statement Extraction|ZBCHINTF||||||ZINTFIN|||100|32000|ZTJD,CID,KEY|0|||10|10|0||0||0
---------- REVHIST ------ Section marker

---------- OPEN    ------ Section marker
	
	kill ^ZMK
	do SYSVAR^SCADRV0()
	new %TAB,%READ
	set %TAB("ZTJD")="/DES=DATE/REQ/TYP=D/LEN=10"
	set %READ="@@%FN,,ZTJD"
	do ^UTLREAD if VFMQ="Q" quit
	
		
	
---------- SCHINIT ------ Section marker

---------- SCHEXEC ------ Section marker

---------- SCHPOST ------ Section marker

---------- SCHEXIT ------ Section marker
	
	type String ZDATA
	type Date ZEXTDAT,zdate
	set ZEXTDAT=ZTJD
	set ZEXTDAT=ZEXTDAT.toString("DDMMYEAR")
	type IO io1=Class.new("IO")
	set io1.fileName=$$TRNLNM^%ZFUNC("SCAU_SPOOL_EXTF")_"/FCD/FCD1D717_STD_"_ZEXTDAT_".TXT"
	set io1.openParams="NEWV/WRITE"
	do io1.open()
	set FILLER=""
	set FILLER.piece(" ",112)=" "
	set zdate=ZTJD.toString("DD/MM/YYYY")
	set zspace=""
	set zspace.piece(" ",119)=" "
	set header="H"_ZEXTDAT_zspace
	do io1.write(header)
	
	set ZPOINTER=$O(^ZMK(ZTJD,""))
	set zcount=0
	while 'ZPOINTER.isNull() do {	
		set ZPOINTER2=$O(^ZMK(ZTJD,ZPOINTER,""))
		while 'ZPOINTER2.isNull() do {
			set zcount=zcount+1
			set ZDATA=^ZMK(ZTJD,ZPOINTER,ZPOINTER2)
			set ZPOINTER2=$O(^ZMK(ZTJD,ZPOINTER,ZPOINTER2))
			do io1.write(ZDATA)
		}
		set ZPOINTER=$O(^ZMK(ZTJD,ZPOINTER))
	}
	set footer="T"_zcount.zero(15,0,1,0)_FILLER
	do io1.write(footer)
	do io1.close()
	
	quit
	
---------- THRINIT ------ Section marker
	
	do SYSVAR^SCADRV0()
	
	
	quit
	
---------- THREXEC ------ Section marker

---------- EXEC    ------ Section marker
	
	//type Number CID
	type Date edate,sdate
	
	set CID=KEY
	
	type RecordZINTFIN intf = Db.getrecord("ZINTFIN","SJD=:ZTJD,KEY=:CID")
	set edate=intf.ENDT
	set sdate=intf.STDT
	set format=intf.format
	if format="S" do STANDARD(ZTJD,CID)

	quit
	
	
	/*
FCD716(ZTJD,CID)
	
	set SPACE=SPACE.piece(" ",256)
	set headRecTyp="1"
	set headPosDt=%SystemDate.toString("YEAYMMDD")
	set srcSys=SPACE.extract(1,20)_"FCD"
	set FILLER196=SPACE.extract(1,196)
	set headerRec=SPACE.extract(1,196)
	set i=0
	type RecordDEP dep = Db.getRecord("DEP","CID=:CID")
	set recType="1"
	type DbSet ds = Db.selectDbSet("HIST","CID=:CID")
	while ds.next() do {
		
		
		type RecordHIST hist = ds.getRecord("HIST")
		set i=i+1
		if (hist.TJD<sdate),(hist.TJD>edate) quit
		set acctNo=dep.CID
		if hist.EFD.isNull() set effDt=hist.TJD.toString("YEAYMMDD")
		else set effDt=hist.EFD.toString("YEAYMMDD")
		set entDt=hist.TJD
		set transSerial=hist.TIME
		if Db.isDefined("ZUTBLTRCD","ETCNUM=:ZETC")
		set transCd=""
		set tellerNo=""
		set srvBrNo=hist.BRCD
		set authNo=""
		set authLevel=""
		
		if hist.itc=0 set dRCcyAmt = hist.tot.zero(16,2,1,0)
		else set dRCcyAmt=drCcyAmt.zero(16,2,1,0)
		
		if hist.itc=1 set crCcyAmt = hist.tot.zero(16,2,1,0)
		else set crCcyAmt=crCcyAmt.zero(16,2,1,0)
		
		set ccyBal=hist.endbal.zero(16,2,1,0)
		
		if ccyBal'<0 set ccySgn="C"
		else set ccyShn="D"
		
		set ccyBal=hist.ENDBAL
		
		if hist.itc=0 set drBthAmt=hist.TAMT.zero(16,2,1,0)
		else set dtBthAmt=drBthAm.zero(16,2,1,0)
		
		if hist.itc=1 set crBthAmt=hist.TAMT
		else set crBthAmt=crBthAmt.zero(16,2,1,0)
		
		set bthSgn=ccySgn
		set bathBal=hist.endbal.zero(16,2,1,0)
		
		set rate=crcd.midrate
		
		set ref=
		
		set forwCcy=dep.posacr.zero(16,2,1,0)
		set crcd=hist.crcd
		set forTyp="001"
		
		set tailRecTyp="9"
		set tailRecNo=i.zero(8,0,1,0)
		
		
		 
		
		}
	
	quit
	*/
	
		
STANDARD(ZTJD,CID)
	//d STANDARD^ZBCHINTF(62639,9200304)
	type String header,detail,footer,zspace,ZOUT,FWDTAG
	type Date zdate
	type Number total,ZNODATA,pos
	set zdate=ZTJD.toString("DD/MM/YYYY")
	set zspace=""
	set zspace.piece(" ",256)=" "
	set header="H"_zdate_zspace.extract(1,119)
	set total=0
	set ZNODATA=1	
	type DbSet ds = Db.selectDbSet("ZINTFIN","SJD=:ZTJD AND KEY=:CID")
	
	while ds.next() do {
		
		type Date sdate,edate
		type Number zrange,NoDataFlg,isDetail,isFirst,isLast
		set (NoDataFlg,isDetail)=0
		set isFirst=1
		set edate=ds.getRecord().ENDT
		set sdate=ds.getRecord().STDT
				
		set zrange=edate-sdate
		
		//Check HIST 
		//if no hist trans. do Nodata
		//else get previous,forward balance info.
		
		//
		type Number i
		set i=0 
		type DbSet ds2 = Db.selectDbSet("HIST","CID=:CID")
			if ds2.isEmpty() quit
			while ds2.next() do {
			
				set ZNODATA=0
				type Date tranDT,CLOSEDT
				type Number ZSEQ,RECTYPE,ACCTNO,BANKNO,BRANCHNO,balAMT,transAMT,closeBalAMT,avalBal,PREVTAG,pos
				type String balSGN,dRcRMARK,transCD,serial1,serial2,CRCD,FILLERWK,UID,CHQNO,cntry,EFFDT,closeBalSGN,avalBalSGN,ZDATA
				set (balSGN,dRcRMARK,transCD,serial1,serial2,CRCD,FILLERWK,UID,CHQNO,cntry,EFFDT,closeBalSGN,avalBalSGN,PREVTAG,ZDATA)=""
				set (ZSEQ,RECTYPE,ACCTNO,BANKNO,BRANCHNO,balAMT,transAMT,closeBalAMT,avalBal)=0
				type RecordHIST hist = ds2.getRecord("HIST")
				if hist.itc="" quit
				set ztjd=hist.TJD
				set ZSEQ=hist.TSEQ
				set ACCTNO=CID.zero(15,0,1,0)
				set BANKNO="004"
				
				
				if (ztjd'<sdate),(ztjd'>edate) do {
					if 'Db.isDefined("DEP","CID=:CID") quit
					type RecordDEP dep = Db.getRecord("DEP","CID=:CID")
					set BRANCHNO=(dep.boo).zero(4,0,1,0)
					//Set up PreviousBal if this is the first sequence
					if isFirst do {
						set isFirst=0
						type String openBalSgn,ACCTNAME,FILLER50
						type Date OPENDT
						type Number openBalAmt,acctLth
						set (openBalAmt,acctLth)=0						
						set (openBalSgn,ACCTNAME,FILLER50)=""
						set FILLER50.piece(50," ")=" "
						set acctLth=$L(dep.zeactnam)
						set ACCTNAME=zspace.extract(1,(30-acctLth)_dep.ZEACTNAM)
						set RECTYPE="1"
						
						
						set OPENDT=edate.toString("DDMMYEAR")
						if (%SystemDate-sdate)<6 do {
							
							if %SystemDate-sdate=1 set openBalAmt=dep.EODBALAV.zero(16,2,1,0)
							if %SystemDate-sdate=2 set openBalAmt=dep.EODBALAVL2.zero(16,2,1,0)
							if %SystemDate-sdate=3 set openBalAmt=dep.EODBALAVL3.zero(16,2,1,0)
							if %SystemDate-sdate=4 set openBalAmt=dep.EODBALAVL4.zero(16,2,1,0)
							if %SystemDate-sdate=5 set openBalAmt=dep.EODBALAVL5.zero(16,2,1,0)
						}
						set tempdate=sdate-1
						else do {
							
							type ResultSet rsprev = Db.select("ENDBAL,TSEQ","HIST","CID=:CID AND TJD=:tempdate","TSEQ DESC")
							if rsprev.next() set openBalAmt=rsprev.getCol(1) quit    

						}
						set openBalAmt=openBalAmt.zero(16,2,1,0)
						//if $D(openBalAmt)=0 set openBalAmt.piece("0",16)="0"
						
						if openBalAmt>0 set openBalSgn = "C"
						else set openBalSgn = "D"
						set FILLER50=zspace.extract(1,50)
						set PREVTAG=RECTYPE_ACCTNO_BANKNO_BRANCHNO_OPENDT_openBalAmt_openBalSgn_ACCTNAME_FILLER50
						set pos=$O(^ZMK(ZTJD,CID,""),-1)
						if pos.isNull() set pos=1
						else set pos=pos+1
						set ^ZMK(ZTJD,CID,pos)=PREVTAG
						write !,"PREVTAG ="_PREVTAG
						if hist.endbal.isNull() set closeBalAMT=closeBalAMT.zero(16,2,1,0)
						else set closeBalAMT=hist.endbal.zero(16,2,1,0)
					}
					
				set RECTYPE="2"
				set i=i+1
				set transDT=(hist.TJD).toString("DDMMYEAR")
				set balAMT = (hist.ENDBAL).zero(16,2,1,0)
					
				if balAMT>0 set balSGN="C"
				else set balSGN="D"
					
				if hist.TOT<0 set transAMT=hist.TOT.zero(15,2,1,0)
				else set transAMT=(hist.TOT).zero(15,2,1,0)
					
				set dRcRMARK="  "
				if hist.ITC1=1 set dRcRMARK = " C"
				if hist.ITC1=0 set dRcRMARK = " D"
				if (hist.ITC1=1),(hist.ITC6=1) set dRcRMARK = "RC"
				if (hist.ITC1=0),(hist.ITC6=1) set dRcRMARK = "RD"
					
				if hist.ZPRNETC.isNull() set transCD="    "
				else set transCD = zspace.extract(1,4-(hist.ZPRNETC.length()))
					
				set UID="0000"
				if '(hist.uid).isNull() set UID=$$USERID^ZKBNKUTL(hist.uid,4)
					//if UID.beginsWith("K"),UID.length()=8 set UID=UID.extract(4,7)
					
				if (hist.TSO.isNull())!('(hist.TSO["ZDDNO")) set CHQNO="0000000"
				else set CHQNO=+(hist.TSO.piece("ZDDNO#",2))
				set CHQNO=CHQNO.zero(7,0,1,0)
					
				if (hist.TSO.isNull())!('(hist.TSO["ZTFREF")) set serial1=zspace.extract(1,20)
				else set serial1=+(hist.TSO.piece("ZTFREF#",2))
				
				set serial1=zspace.extract(1,20-(serial1.length()))_serial1
					
				set serial2=zspace.extract(1,5)
					
				if (hist.TSO.isNull())!('(hist.TSO["ZORGC")) set cntry=zspace.extract(1,2)
				else set cntry=+(hist.TSO.piece("ZORGC#",2))
					
				if (hist.EFD.isNull())!(hist.EFD=TJD) set EFFDT=zspace.extract(1,8)
				else set EFFDT=hist.EFD.toString("DDMMYEAR")
				
				//if (hist.crcd="US1")!(hist.crcd="US2")!(hist.crcd="US3") set zcrcd="USD"
				//else set zcrcd="   "
				
				if hist.crcd.isNull() set zcrcd="   "
				else set zcrcd=hist.crcd
					
				set FILLERWK=zspace.extract(1,10)
				set ZDATA=RECTYPE_ACCTNO_BANKNO_BRANCHNO_transDT_balAMT_balSGN_transAMT_dRcRMARK_transCD
				set ZDATA=ZDATA_UID_CHQNO_serial1_serial2_cntry_EFFDT_zcrcd_FILLERWK
					
				set pos=$O(^ZMK(ZTJD,CID,""),-1)
				if pos.isNull() set pos=1
				else set pos=pos+1
					
				set ^ZMK(ZTJD,CID,pos)=ZDATA
				write !,"Detail ="_ZDATA
					/*
					type RecordTMPRPT5 detail = Db.getRecord("TMPRPT5","PID=:%ProcessID,KEY1='INTFOUT',KEY2='Detail',KEY3=:ZTJD,KEY4=:CID,KEY5=:i",1)
					set detail.data=ZDATA
					do detail.save()
					*/
					
					//Last SEQ,set up forward bal
				set RECTYPE="3"
				set CLOSEDT=edate.toString("DDMMYEAR")
				if hist.endbal.isNul() set closeBalAMT=closeBalAMT.zero(16,2,1,0)
				else set closeBalAMT=hist.endbal.zero(16,2,1,0)
					
					//if $D(closeBalAMT)=0 set closeBalAMT.piece("0",16)="0"
					
				if closeBalAMT>0 set closeBalSGN="C"
				else set closeBalSGN="D"
				
				if (%SystemDate-edate)=1 set avalBal=dep.EODBALAV.zero(16,2,1,0)
				else if (%SystemDate-edate)=2 set avalBal=dep.EODBALAVL2.zero(16,2,1,0)
				else if (%SystemDate-edate)=3 set avalBal=dep.EODBALAVL3.zero(16,2,1,0)
				else if (%SystemDate-edate)=4 set avalBal=dep.EODBALAVL4.zero(16,2,1,0)
				else if (%SystemDate-edate)=5 set avalBal=dep.EODBALAVL5.zero(16,2,1,0)
				else set avalBal=closeBalAMT
					
					
					
				if avalBal>=0 set avalBalSGN="C"
				else set avalBalSGN="D"
				set total = i+2
				set total = total.zero(6,0,1,0)
				set FILLER57=zspace.extract(1,57)
				set FWDTAG=RECTYPE_ACCTNO_BANKNO_BRANCHNO_CLOSEDT_closeBalAMT_closeBalSGN_avalBal_avalBalSGN_total_FILLER57
			}
		}		

	}
	
	set FILLER=""
	set FILLER.piece(" ",112)=" "
	//set footer="T"_total.zero(15,0,1,0)_FILLER
	
	
	set recType="5"
	set FILLER102=zspace.extract(1,102)

	
	set pos=$O(^ZMK(ZTJD,CID,""),-1)
	if pos.isNull() set pos=1
	else set pos=pos+1
	if ZNODATA set ^ZMK(ZTJD,CID,pos)=$$NODATA(CID)
	else do {	
		set ^ZMK(ZTJD,CID,pos)=FWDTAG
		write !,"FWDTAG ="_FWDTAG
	}

	
	quit
	
	
NODATA(ZCID)
	//w $$NODATA^ZBCHINTF(9200304)
	type String ZDATA,ZSPACE
	
	set ZSPACE=""
	set ZSPACE.piece(" ",105)=" "
	set ZCID=ZCID.zero(15,0,1,0)
	set ZDATA="1"_ZCID_"NO DATA"_ZSPACE
	
	quit ZDATA
	
		
BRANDING(ZTJD,CID)

	type String header,footer,firsRecType,FILLER,SPACE,RECTYPE,headerREC,cngBRREC,brNam,addr1,addr2,titleNam
	type Date posDate
	set FILLER1=" "		
	type RecordDEP dep = Db.getRecord("DEP","CID=:CID")
	set SPACE.piece(" ",200)=" "
	
	set firsRecType="H"
	set posDate= %SystemDate.toString("DDMMYEAR")
	set FILLER151=SPACE.extract(1,151)
	
	set headerREC=firsRecType_posDate_FILLER151
	
	set ^ZMK(ZTJD,CID,"BRANDING",1)=  headerREC
	
	set recType="1"
	set FILLER121=SPACE.extract(1,121)
	set brNoCng=SPACE.extract(1,3-dep.boo.length())_dep.boo
	set FILLER35=SPACE.extract(1,35)
	
	set cngBrRec=recType_FILLER121_brNoCng_FILLER35
	
	set ^ZMK(ZTJD,CID,"BRANDING",2)= cngBrRec
	
	set namLabel="NAME"
	set titleNam=SPACE.extract(1,53-(dep.ZEACTNAM.length()))_dep.ZEACTNAM
	
	set ZBRCD=dep.boo
	
	if Db.isDefined("ZUTBLBRCD","BRCD=:ZBRCD") do {
		type RecordZUTBLBRCD brcd = Db.getRecord("ZUTBLBRCD","BRCD=:ZBRCD")
		set brNam=SPACE.extract(1,30-(brcd.ENGNAM.length()))_brcd.ENGNAM
	}
	else set brNam=SPACE.extract(1,30)
	set FILLER70=SPACE.extract(1,70)
	
	set custNamBrNam=recType_namLabel_FILLER1_titleNam_FILLER1_brNam_FILLER70
	
	set ^ZMK(ZTJD,CID,"BRANDING",3)=custNamBrNam
	
	
	set addrLabel="ADDRESS"
	set addr1=SPACE.extract(1,50)
	set addr2=SPACE.extract(1,50)
	
	if Db.isDefined("ACNADDR","CID=:CID") do {
		type RecordACNADDR zddr = Db.getRecord("ACNADDR","CID=:CID")
		set addr1=(zddr.AD1).extract(1,50)
		set addr2=(zddr.AD2).extract(1,50)
	}	
	set FILLER101=SPACE.extract(1,101)
	
	set addrRec=FILLER1_addrLabel_FILLER1_addr1_FILLER101
	
	set ^ZMK(ZTJD,CID,"BRANDING",4)=addrRec
	
	set FILLER8=SPACE.extract(1,8)
	set accLabel="       ACCOUNT NO."
	set accNo=dep.CID.zero(13,0,1,0)
	set accNo=accNo.insert("-",4)
	set accNo=accNo.insert("-",7)
	set accNo=accNo.insert("-",12)
	set currTitle=" CURRENCY"
	set currNam=dep.CRCD
	set dateLabel="       DATE"
	set todayDt=%SystemDate.toString("DDMMYEAR")
	set FILLER35=SPACE.extract(1,35)
	
	set addr2AcNo=FILLER8_addr2_FILLER1_accLabel_FILLER1_accNo_currTitle_currNam_dateLabel_todayDt_FILLER35
	
	set ^ZMK(ZTJD,CID,"BRANDING",5)=addr2AcNo
	
	set recType="2"
	set dateLabel="    DD/MM/YY"
	set FILLER3="   "
	set desLabel="DESCRIPTION"
	set FILLER19=SPACE.extract(1,19)
	set dRdCLabel="      DEBIT/CREDIT"
	set balLabel="            BALANCE"
	set bnkLabel=SPACE.extract(1,24)_"BANK USE ONLY"
	set refNo=SPACE.extract(1,20)_"REFERENCE-NO"
	
	set headRec=recType_dateLabel_FILLER3_desLabel_FILLER19_dRdCLabel_FILLER3_balLabel_FILLER1_bnkLabel_FILLER4_refNo
	
	set ^ZMK(ZTJD,CID,"BRANDING",6)=headRec
	
	set recType="3"
	set FILLER8=SPACE.extract(1,8)
	set prevLabel=SPACE.extract(1,24)_"PREVIOUS BALANCE"
	set FILLER34=SPACE.extract(1,34)
	//set prevBal=SPACE.extract(1,22)
	set EXIT=0
	
	type Number endbal,withCnt,depCnt,totAmtDr,totAmtCr
	type String prevBal
	set (endbal,withCnt,depCnt,totAmtDr,totAmtCr)=0
	/*
	type Resultset rsHist = Db.select("ENDBAL","HIST","CID=:CID AND TJD=:sdate","TSEQ DESC")
	
	if rsHist.isEmpty() set endbal=0
	if rsHist.next() set endbal=rsHist.getCol(1)
	*/
	set endbal=$$ENDBAL^ZEXTUTL(dep,sdate)
	set prevBal=endbal.toString(2,"., 0")
	set FILLER21=SPACE.extract(1,55)
		
	set prevBalrec=recType_FILLER8_prevLabel_FILLER34_prevBal_FILLER21
	
	set ^ZMK(ZTJD,CID,"BRANDING",7)=prevBalrec
	
	set i=0
	
	type DbSet ds = Db.selectDbSet("HIST","CID=:CID")
	if ds.isEmpty() do NODATA(CID)
	while ds.next() do {
		
		type Number drAmt,crAmt,bal
		type Date entDt
		type RecordHIST hist=ds.getRecord("HIST")
		//Non-transaction record ,quit
		if hist.itc.isNull() quit
		
		set i=i+1
			
		set (drAmt,crAmt,bal)=0
			
		set effDate=hist.TJD
		set trDesc=SPACE.extract(1,40)
			
		if hist.ITC1=0 do {
			set withCnt=withCnt+1
			set totAmtDr=totAmtDr+hist.TOT
			set drAmt=hist.TOT.zero(17,2,1,0)
			set drAmt=drAmt.toString(2,"., 0")
			set drAmt=drAmt.insert(",",3)
			set drAmt=drAmt.insert(",",7)
			set drAmt=drAmt.insert(",",11)
		}
		else do {
			set drAmt=drAmt.zero(17,2,1,0)
			set drAmt=drAmt.insert(",",3)
			set drAmt=drAmt.insert(",",7)
			set drAmt=drAmt.insert(",",11)
		}
				
		if hist.ITC1=1 do {
			set depCnt=depCnt+1
			set totAmtCr=totAmtCr+hist.TOT
			set crAmt=hist.TOT.zero(17,2,1,0)
			set crAmt=crAmt.insert(",",3)
			set crAmt=crAmt.insert(",",7)
			set crAmt=crAmt.insert(",",11)
		}
		else do {
			set crAmt=crAmt.zero(17,2,1,0)
			set crAmt=crAmt.insert(",",3)
			set crAmt=crAmt.insert(",",7)
			set crAmt=crAmt.insert(",",11)
		}
						
		set bal=hist.ENDBAL
		set bal=(bal).zero(22,2,1,1)
		set bal=bal.insert(",",3)
		set bal=bal.insert(",",7)
		set bal=bal.insert(",",11)
			
		set serBrNo=(hist.brcd).zero(3,0,1,0)
		set usrNo=$$USERID^ZKBNKUTL(hist.uid,5)						
		if hist.EFD.isNull() set entDt=hist.TJD.toString("DDMMYEAR")
		else set entDt=hist.EFD.toString("DDMMYEAR")
		set FILELR6=SPACE.extract(1,6)
		if (hist.TSO.isNull())!('(hist.TSO["ZORGC")) set cntryCd="  "
		else set cntryCd=+(hist.TSO.piece("ZORGC#",2))
			
		set serial1 =SPACE.extract(1,20)
		set serial2 =SPACE.extract(1,5)
		set FILELR6=SPACE.extract(1,6)
			
		set tranRec=FILLER1_effDate_trDesc_drAmt_crAmt_bal_serBrNo_FILLER1_usrNo_FILLER1_entDt_FILLER6_cntry_serial1_serial2_FILLER6
			
		set fwdLabel=SPACE.extract(1,25)_"FORWARD BALANCE"
		set fwdBal=hist.endbal
		set FILLER34=SPACE.extract(1,34)
		set FILLER55=SPACE.extract(1,55)
		set fwdBalRec=" "_fwdLabel_FILLER34_fwdBal_FILLER55
			
	}
	
	set drDsc=SPACE.extract(1,17)_"TOTAL WITHDRAWAL ="
	set crDsc=SPACE.extract(1,19)_"TOTAL DEPOSIT  ="
	set drTot=withCnt
	set crTot=depCnt
	set itemLabel="  ITEM"
	set FILLER77=SPACE.extract(1,77)
	
	set drRec=" "_drDsc_drTot_"   "_itemLabel_totAmtDr_FILLER77
	set crRec=" "-crDsc_cdTot_"   "_itemLabel_totAmtDr_FILLER77
	

	//set totAmtDr=
	set recType="5"
	set FILLER102=SPACE.extract(1,102)
	set PAGE=""
	set FILLER41=SPACE.extract(1,41)
	
	
	/*
	if hist.itc=0 set drCrDesc=SPACE.extract(1,17)_"TOTAL WITHDRAWAL =",toTalItem=
	else if hist.itc=1 set drCrDesc=SPACE.extract(1,19)_"TOTAL DEPOSIT  ="toTalItem=
	else set drCrDesc=SPACE.extract(1,35)
	set toTalItem=
	*/
	
	
	quit
	
BRANDNODATA(ZTJD,CID)
	
	quit
		/*
FCD712(ZTJD,CID)

		type RecordDEP dep = Db.getRecord("DEP","CID=:CID")
		set ZACN=dep.acn
		type RecordCIF cid = Db.getRecord("CIF","ACN=:ZACN")
		type String FILLER1,crcd
		type Number accNo
		type Date openDt,pedDt
		set recTypeDet="1"
		set FILLER1="|"
		set accNo=CID.zero(11,0,1,0)
		set crcd=dep.crcd
		set openDt=dep.ODT.toString("YEARMMDD")
		set closeDt=dep.DLC.toString("YEARMMDD")
		set dtlastMaint=dep.FMLD.toString("YEARMMDD")
		set accCcyBal=dep.EODBAL.zero(16,2,1,1)
		
		if Db.isDefined("CRCD","CO=:%CO,CRCD=:crcd") do {
			type RecordCRCD zcrcd = Db.getRecord("CRCD","CO=:%CO,CRCD=:crcd")
			set accBthBal=(dep.EODBAL*zcrcd.MIDRATE).zero(16,2,1,1)
			set curBthBal=(dep.BAL*zcrcd.MIDRATE).zero(16,2,1,1)
			set bthIrn=(dep.POSACR*zcrcd.ZEXPR).zero(16,4,1,1)
			set ccyTaxAmt=(dep.BWTYTD*zcrcd.ZSELR).zero(16,2,1,1)
			set fwdAccTax=(dep.IYTD*zcrcd.ZEXPR).zero(16,2,1,1)
			set pedBthOut=(dep.MEBAL6*zcrcd.MIDRATE).zero(16,2,1,1)
			set pedBthOut2=(dep.mebal12*zcrcd.MIDRATE).zero(16,2,1,1)
			
		}
		else do {
			set accBthBal=accBthBal.zero(16,2,1,1)
			set curBthBal=curBthBal.zero(16,2,1,1)
		}
		set lastTrasDt=dep.TLD.toString("YEARMMDD")
		if dep.STAT=4 set miscAccStat=" O"
		else set miscAccStat=" C"
		set miscCd="   "
		if Db.isDefined("ZUTBLFCDTAC","CID=:CID") do {
			type RecordZUTBLFCDTAC FCDTAC = Db.getRecord("ZUTBLFCDTAC","CID=:CID")
			set fcdType=FCDTAC.TYPE
			type ResultSet rsfcdTyp = Db.select("KBFCDTYP","ZUTBLFCDTYP","TYPE=:fcdType")
			if rsfcdTyp.next() set miscCd=rsfcdTyp.getCol(1)
		}
		set curCcyBal=dep.BAL.zero(16,2,1,1)
		
		type ResultSet phld = Db.select("THLDAMT,PHC,ZHLDACT","PHLD","CID=:CID")
		while phld.next() do {
			set THLDAMT=phld.getCol(1)
			set hldbal=hldbal+THLDAMT
			set hldType=phld.getCol(2)
			set hldAcc=phld.getCol(3)
		}
		set hldbal=hldbal.zero(16,2,1,1)
		set hldAcc=hldAcc.zero(11,2,1,0)
		set spcRate=dep.IRN
		set ccyIrn=dep.POSACR.zero(16,4,1,1)
		set pbkNo=dep.PBKSN.zero(11,0,1,0)
		set lineNo=dep.PBKLIN.zero(3,0,1,0)
		set stpCalFlg="0"
		set curDt=%SystemDate.toString("DDMMYEAR")
		
		if Db.isDefined("ZUTBLWREXAMT","WHCALMTH=:dep.INTWCALC") do {
			type RecordZUTBLWREXAMT wrex = Db.getRecord("ZUTBLWREXAMT","WHCALMTH=:dep.INTWCALC")
			set taxkey=wrex.TAXKEY
		}
		set fwdAccInt=dep.IYTD.zero(16,0,1,1)
		set custId=dep.ACN
		set dedFeeAccNo=dep.ZSAFEACT
		set noNobk="000"
		set pedCcyOut=dep.MEBAL6.zero(16,3,1,1)
		set pedCcyOut2=dep.mebal12.zero(16,2,1,1)
		if dep.crcd="USD" set bbDepCom=(0.25).zero(9,2,1,0) 
		else set bbDepCom=(0.5).zero(9,2,1,0)
		set bbWithCom=bbDepCom
		set bnDepCom="000000001"
		set bnWithCom="000000001"
		set ttDepCom="000000025"
		set ttWithCom=bbDepCom
		set lastDepDt=dep.DTLC.toString("DDMMYEAR")
		set lastIntDt=dep.IPLD.toString("DDMMYEAR")
		set tdBnCcy="+000000000000000"
		set pedDt=dep.ipld.toString("DDMMYEAR")
		set taxid=cif.taxid
		set fwdCcyInt="+000000000000000"
		set engNam=SPACE(1,50-(cif.zenam.length()))_cif.zenam
		type RecordACNADDR acnaddr = Db.getRecord("ACNADDR","CID=:CID")
		if acnaddr.ad1.isNull() set add1=SPACE.extract(1,50)
		else set add1=acnaddr.ad1.extract(1,50)
		if acnaddr.ad2.isNull() set add2=SPACE.extract(1,50)
		else set add2=acnaddr.ad2.extract(1,50)
		set cntry=SPACE.extract(1,20-(cif.rescd.length()))_cif.rescd
		set nation=SPACE.extract(1,20-(cif.nation.length()))_cif.nation
		set passNum=SPACE.extract(1,20-(cif.pasnum.length()))_cif.pasnum
		set phoneNum=SPACE.extract(1,20)
		set faxNum=SPACE.extract(1,20)
		set email=SPACE.extract(1,20-(cif.ZEMAIL.length()))_cif.ZEMAIL
		if cif.type=0 set idNo=SPACE.extract(1,20-(cif.zcizid.length()))_cif.zcizid
		else set idNo=SPACE.extract(1,20-(cif.zjin.length()))_cif.zjin
		set sysType="0000000"
		set oldCustId="00000000000"
		set idNo="
		
		set ^ZMK("FCD712",ZTJD,CID)=
		
		*/
		
		
		
		
		
		
		
					

---------- THREXIT ------ Section marker
