//DO NOT MODIFY  UTBLBRCD Extraction|ZEXTBRCD|||||||1
 	
 	/*
ORIG: Ravipong Chumsai Na Ayuthaya  - 07/02/2012
DESC: Extract data from Table - UTBLBRCD
	*/
	

	do SYSVAR^SCADRV0()
	
	new io1,output
	set ZEXTDAT = $$DAT^%ZM(TJD,"YEARMMDD")
	type IO io1=Class.new("IO")
	set io1.fileName=$$TRNLNM^%ZFUNC("SCAU_SPOOL_EXTF")_"/"_"UTBLBRCD_"_ZEXTDAT_".TXT"
	set io1.openParams="NEWV/WRITE"
	do io1.open()
	set tWRITE = "BRANCH_ID"_"|"_"DESCRIPTION"_"|"_"DEFAULT_COSTCENTER"_"|"
	do io1.write(tWRITE)
	set i=0
	type DbSet ds = Db.selectDbSet("UTBLBRCD")
	while ds.next() do {
		set i=i+1
		set output=""
		set output.piece("|",1) = ds.getRecord().BRCD
		set output.piece("|",2) = ds.getRecord().DESC
		set output.piece("|",3) = ds.getRecord().CCDEF_"|"
		do io1.write(output)
		}
	do io1.write(i_"|")	
		
		
	quit
	
